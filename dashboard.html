<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>
    <link href="{{ url_for('static', filename='STYLE.css') }}" rel="stylesheet">
    <style>
        /* Ø£Ù†Ù…Ø§Ø· Ø¶Ø±ÙˆØ±ÙŠØ© Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø¯Ø§Ø®Ù„ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… */
        main { padding: 40px 20px; max-width: 1200px; margin: 0 auto; }
        .form-grid { display: grid; grid-template-columns: 150px 1fr; gap: 10px 20px; align-items: center; }
        .form-grid input[type="text"], .form-grid textarea, .form-grid input[type="password"], .form-grid select { width: 100%; }
        /* Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ø§Ù„Ø²Ø± ÙˆØ§Ù„ØªÙƒØ³ØªØ§Ø±ÙŠØ§ Ù…Ù† Ø§Ù„Ù€ grid column Ù„ÙŠÙ…ØªØ¯Ø§ Ø¹Ù„Ù‰ Ø·ÙˆÙ„ Ø§Ù„Ù…Ø³Ø§Ø­Ø© */
        .form-grid button { grid-column: 1 / -1; margin-top: 15px; } 
        .form-grid textarea { grid-column: 1 / -1; }

        .barber-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .data-list { list-style: none; padding: 0; }
        .data-list li { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px dashed var(--muted); }
        .data-list li:last-child { border-bottom: none; }
        
        /* Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ø°ÙŠ ÙŠÙ…ØªØ¯ Ø¹Ù„Ù‰ ÙƒØ§Ù…Ù„ Ø§Ù„Ø¹Ø±Ø¶ */
        .full-width { grid-column: 1 / -1; }

        @media(max-width:768px){
            .form-grid { grid-template-columns: 1fr; }
            .form-grid label { grid-column: 1 / -1; }
            .form-grid input, .form-grid textarea, .form-grid select, .form-grid small { grid-column: 1 / -1; }
        }
    </style>
</head>
<body>

<header>
    <div class="container">
        <nav class="nav" style="justify-content: space-between; height: auto;">
            <div class="brand" style="background: none; box-shadow: none;">
                <a href="/" style="color: var(--primary); text-decoration: none; font-size: 1.5em; font-weight: bold;">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>
            </div>
            <a href="{{ url_for('logout') }}" class="btn btn-danger">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</a>
        </nav>
    </div>
</header>

<main>
    <h1>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…ÙˆÙ‚Ø¹</h1>

    <section class="card-section">
        <h2 class="card-title">ğŸ”’ Ø¥Ø¯Ø§Ø±Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±</h2>
        <div class="card-body">
            <form id="password-form" class="form-grid">
                <label for="current_password">ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø§Ù„Ø­Ø§Ù„ÙŠØ©</label>
                <input type="password" id="current_password" name="current_password" required>

                <label for="new_password">ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</label>
                <input type="password" id="new_password" name="new_password" required minlength="4">
                
                <button type="submit" class="btn btn-secondary">ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±</button>
            </form>
        </div>
    </section>

    <section class="card-section">
        <h2 class="card-title">âœï¸ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Hero)</h2>
        <div class="card-body">
            <form id="hero-texts-form" class="form-grid">
                <label for="hero_title">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</label>
                <input type="text" id="hero_title" name="hero_title" value="{{ site_data.hero_title }}" required>

                <label for="hero_desc">Ø§Ù„ÙˆØµÙ</label>
                <textarea id="hero_desc" name="hero_desc" rows="3">{{ site_data.hero_desc }}</textarea>
                
                <button type="submit" class="btn btn-save">Ø­ÙØ¸ Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
            </form>
        </div>
    </section>

    <section class="card-section">
        <h2 class="card-title">âœï¸ Ø¥Ø¯Ø§Ø±Ø© Ù‚Ø³Ù… Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù†Ø§ (#About)</h2>
        <div class="card-body">
            <form id="about-texts-form" class="form-grid">
                
                <label for="about_title">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‚Ø³Ù… (Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù†Ø§)</label>
                <input type="text" id="about_title" name="about_title" 
                        value="{{ site_data.extra_texts.about_title if site_data.extra_texts and site_data.extra_texts.about_title else '' }}" required>
                
                <hr class="full-width" style="margin: 15px 0; border-top: 1px dashed var(--muted);">
                <h3 class="full-width">Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ (Ø§Ù„ØµÙˆØ±Ø© ÙˆØ§Ù„ÙˆØµÙ)</h3>
                
                <label for="about_image1">ØµÙˆØ±Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© 1 (Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù)</label>
                <input type="text" id="about_image1" name="about_image1" 
                        value="{{ site_data.extra_texts.about_image1 if site_data.extra_texts and site_data.extra_texts.about_image1 else '' }}">
                <small style="grid-column: 2 / -1;">Ù…Ø«Ø§Ù„: about1.jpg (ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…Ù„Ù ÙÙŠ Ù…Ø¬Ù„Ø¯ static)</small>

                <label for="about_desc_card1" class="full-width">ÙˆØµÙ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© 1</label>
                <textarea id="about_desc_card1" name="about_desc_card1" rows="3">{{ site_data.extra_texts.about_desc_card1 if site_data.extra_texts and site_data.extra_texts.about_desc_card1 else '' }}</textarea>

                <hr class="full-width" style="margin: 15px 0; border-top: 1px dashed var(--muted);">
                <h3 class="full-width">Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© (Ø§Ù„ØµÙˆØ±Ø© ÙˆØ§Ù„ÙˆØµÙ)</h3>
                
                <label for="about_image2">ØµÙˆØ±Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© 2 (Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù)</label>
                <input type="text" id="about_image2" name="about_image2" 
                        value="{{ site_data.extra_texts.about_image2 if site_data.extra_texts and site_data.extra_texts.about_image2 else '' }}">
                <small style="grid-column: 2 / -1;">Ù…Ø«Ø§Ù„: about2.jpg</small>

                <label for="about_desc_card2" class="full-width">ÙˆØµÙ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© 2</label>
                <textarea id="about_desc_card2" name="about_desc_card2" rows="3">{{ site_data.extra_texts.about_desc_card2 if site_data.extra_texts and site_data.extra_texts.about_desc_card2 else '' }}</textarea>

                <button type="submit" class="btn btn-save">Ø­ÙØ¸ ØªØ¹Ø¯ÙŠÙ„Ø§Øª "Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù†Ø§"</button>
            </form>
        </div>
    </section>

    <section class="card-section">
        <h2 class="card-title">âœ‚ï¸ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ù„Ø§Ù‚ÙŠÙ†</h2>
        <div class="card-body barber-grid">
            {% for barber in site_data.barbers %}
            <div class="barber-card card" data-old-name="{{ barber.name }}">
                <img src="{{ url_for('static', filename=barber.image) }}" alt="ØµÙˆØ±Ø© {{ barber.name }}" style="width: 100%; height: 150px; object-fit: cover; border-radius: 4px; margin-bottom: 10px;">
                <form class="update-barber-form" data-old-name="{{ barber.name }}">
                    <label>Ø§Ù„Ø§Ø³Ù…:</label>
                    <input type="text" name="name" value="{{ barber.name }}" required>
                    
                    <label>Ø§Ù„Ù‡Ø§ØªÙ:</label>
                    <input type="text" name="phone" value="{{ barber.phone }}" required>
                    
                    <label>ØµÙˆØ±Ø© (Ø§Ø³Ù… Ù…Ù„Ù):</label>
                    <input type="text" name="image" value="{{ barber.image }}" required>
                    
                    <label>Ø§Ù†Ø³ØªØºØ±Ø§Ù…:</label>
                    <input type="text" name="instagram" value="{{ barber.instagram if barber.instagram else '' }}">
                    
                    <div style="margin-top: 10px; display: flex; justify-content: space-between; gap: 10px;">
                        <button type="submit" class="btn btn-save" style="flex-grow: 1; padding: 10px;">ØªØ­Ø¯ÙŠØ«</button>
                        <button type="button" class="btn btn-danger delete-barber-btn" data-name="{{ barber.name }}" style="flex-grow: 1; padding: 10px;">Ø­Ø°Ù</button>
                    </div>
                </form>
            </div>
            {% endfor %}
            
            <div class="barber-card card" style="background-color: #1a1e27;">
                <h3>+ Ø¥Ø¶Ø§ÙØ© Ø­Ù„Ø§Ù‚ Ø¬Ø¯ÙŠØ¯</h3>
                <form id="add-barber-form">
                    <label>Ø§Ù„Ø§Ø³Ù…:</label>
                    <input type="text" name="name" required>
                    
                    <label>Ø§Ù„Ù‡Ø§ØªÙ:</label>
                    <input type="text" name="phone" placeholder="Ù…Ø«Ø§Ù„: 905001234567" required>
                    
                    <label>ØµÙˆØ±Ø© (Ø§Ø³Ù… Ù…Ù„Ù):</label>
                    <input type="text" name="image" placeholder="Ù…Ø«Ø§Ù„: kuafor_new.jpg" required>
                    
                    <label>Ø§Ù†Ø³ØªØºØ±Ø§Ù…:</label>
                    <input type="text" name="instagram">
                    
                    <button type="submit" class="btn btn-secondary" style="margin-top: 10px; width: 100%;">Ø¥Ø¶Ø§ÙØ©</button>
                </form>
            </div>
        </div>
    </section>

    <section class="card-section">
        <h2 class="card-title">ğŸ–¼ï¸ Ø¥Ø¯Ø§Ø±Ø© ØµÙˆØ± Ø§Ù„Ù…Ø¹Ø±Ø¶</h2>
        <div class="card-body">
            <h3>Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©</h3>
            <form id="add-image-form" class="form-grid" style="grid-template-columns: 1fr 1fr auto;">
                <input type="text" name="filename" placeholder="Ø§Ø³Ù… Ù…Ù„Ù Ø§Ù„ØµÙˆØ±Ø© (Ù…Ø«Ø§Ù„: qasim_2.jpg)" required>
                <select name="barber_name" required>
                    <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø­Ù„Ø§Ù‚</option>
                    {% for barber in site_data.barbers %}
                        <option value="{{ barber.name }}">{{ barber.name }}</option>
                    {% endfor %}
                    <option value="ØºÙŠØ± Ù…Ø­Ø¯Ø¯">ØºÙŠØ± Ù…Ø­Ø¯Ø¯</option>
                </select>
                <button type="submit" class="btn btn-secondary" style="grid-column: auto; margin-top: 0;">Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø©</button>
            </form>
            
            <h3 style="margin-top: 25px;">Ø§Ù„ØµÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h3>
            <ul class="data-list">
                {% for image_obj in site_data.gallery_images %}
                <li>
                    <span>{{ image_obj.filename }} (Ù„Ù€: **{{ image_obj.barber_name }}**)</span>
                    <div class="actions">
                        <button type="button" class="btn btn-danger delete-image-btn" data-filename="{{ image_obj.filename }}" style="padding: 5px 10px;">Ø­Ø°Ù</button>
                    </div>
                </li>
                {% endfor %}
            </ul>
        </div>
    </section>

    <section class="card-section">
        <h2 class="card-title">ğŸ“ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ© (Extra)</h2>
        <div class="card-body">
            
            <p style="color: var(--primary); font-weight: bold; margin-bottom: 20px;">
                *Ù…Ù„Ø§Ø­Ø¸Ø©: Ù„ØªÙ…ÙƒÙŠÙ† Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø®Ø±ÙŠØ·Ø© ÙˆØ§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„ØŒ Ù‚Ù… Ø¨Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„ØªØ§Ù„ÙŠØ©: 
                <br>
                <span style="display: inline-block; margin-top: 5px;">`opening_hours`ØŒ `address`ØŒ `map_iframe_code` (Ù„Ù‚ÙŠÙ…Ø© ÙƒÙˆØ¯ Ø§Ù„Ù€ iframe Ø§Ù„ÙƒØ§Ù…Ù„)</span>
            </p>
            
            <h3>Ø¥Ø¶Ø§ÙØ© Ù†Øµ Ø¬Ø¯ÙŠØ¯</h3>
            <form id="add-text-form" class="form-grid" style="grid-template-columns: 1fr 1fr auto;">
                <input type="text" name="key" placeholder="Ù…ÙØªØ§Ø­ Ø§Ù„Ù†Øµ (Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ/Ø¨Ø¯ÙˆÙ† Ù…Ø³Ø§ÙØ§Øª)" required>
                <input type="text" name="value" placeholder="Ù‚ÙŠÙ…Ø© Ø§Ù„Ù†Øµ (Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø£Ùˆ ÙƒÙˆØ¯ Ø§Ù„Ø®Ø±ÙŠØ·Ø©)" required>
                <button type="submit" class="btn btn-secondary" style="grid-column: auto; margin-top: 0;">Ø¥Ø¶Ø§ÙØ© Ù†Øµ</button>
            </form>
            
            <h3 style="margin-top: 25px;">Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ø­Ø§Ù„ÙŠØ© (Ù…Ø«Ù„ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„ ÙˆØ§Ù„Ø¹Ù†ÙˆØ§Ù†)</h3>
            <ul class="data-list">
                {% for key, value in site_data.extra_texts.items() %}
                    {% if not key.startswith('about_') and key not in ['hero_title', 'hero_desc'] %}
                    <li>
                        <span>**{{ key }}**: {{ value | truncate(50) }}</span> 
                        <div class="actions">
                            <button type="button" class="btn btn-danger delete-text-btn" data-key="{{ key }}" style="padding: 5px 10px;">Ø­Ø°Ù</button>
                        </div>
                    </li>
                    {% endif %}
                {% endfor %}
            </ul>
        </div>
    </section>
    
</main>


<script>
    // Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„Ù€API
    function postData(url, data) {
        return fetch(url, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data)
        })
        .then(response => {
            if (!response.ok) {
                // Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø®Ø§Ø¯Ù… (Ù…Ø«Ù„ 400)
                return response.json().then(errorData => {
                    throw new Error(errorData.message || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ©.');
                });
            }
            return response.json();
        });
    }

    function deleteData(url) {
        return fetch(url, {
            method: 'DELETE',
            headers: { 'Content-Type': 'application/json' }
        })
        .then(response => {
            if (!response.ok) {
                return response.json().then(errorData => {
                    throw new Error(errorData.message || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ©.');
                });
            }
            return response.json();
        });
    }

    // 1. Ù…Ø¹Ø§Ù„Ø¬ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±
    document.getElementById('password-form').addEventListener('submit', function(e) {
        e.preventDefault();
        const form = e.target;
        const data = {
            current_password: form.current_password.value,
            new_password: form.new_password.value
        };
        
        postData('/api/change_password', data)
        .then(data => {
            alert(data.message);
            if (data.success) { window.location.href = "{{ url_for('admin_login') }}"; }
        })
        .catch(error => { console.error('Error:', error); alert(error.message); });
    });

    // 2. Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Hero)
    document.getElementById('hero-texts-form').addEventListener('submit', function(e) {
        e.preventDefault();
        const form = e.target;
        const data = {
            hero_title: form.hero_title.value,
            hero_desc: form.hero_desc.value
        };
        postData('/api/update_texts', data)
        .then(data => {
            alert(data.message);
            if (data.success) { window.location.reload(); }
        })
        .catch(error => { console.error('Error:', error); alert(error.message); });
    });

    // 3. Ù…Ø¹Ø§Ù„Ø¬ Ù‚Ø³Ù… "Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù†Ø§" 
    document.getElementById('about-texts-form').addEventListener('submit', function(e) {
        e.preventDefault();

        const form = e.target;
        const data = {
            about_title: form.about_title.value,
            about_desc_card1: form.about_desc_card1.value,
            about_image1: form.about_image1.value,
            about_desc_card2: form.about_desc_card2.value,
            about_image2: form.about_image2.value
        };

        postData('/api/update_about', data)
        .then(data => {
            alert(data.message);
            if (data.success) { window.location.reload(); }
        })
        .catch(error => {
            console.error('Error:', error);
            alert(error.message);
        });
    });


    // 4. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ù„Ø§Ù‚ÙŠÙ† - Ø¥Ø¶Ø§ÙØ©
    document.getElementById('add-barber-form').addEventListener('submit', function(e) {
        e.preventDefault();
        const form = e.target;
        // ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø¨Ø§Ù„ØµÙŠØºØ© Ø§Ù„Ø¯ÙˆÙ„ÙŠØ© ÙˆØ¨Ø¯ÙˆÙ† Ø£ÙŠ Ø±Ù…ÙˆØ² (+, Ù…Ø³Ø§ÙØ§Øª)
        const phone_number = form.phone.value.replace(/[^0-9]/g, ''); 
        const data = {
            name: form.name.value,
            phone: phone_number,
            image: form.image.value,
            instagram: form.instagram.value || ""
        };
        
        postData('/api/add_barber', data)
        .then(data => {
            alert(data.message);
            if (data.success) { window.location.reload(); }
        })
        .catch(error => { console.error('Error:', error); alert(error.message); });
    });

    // 5. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ù„Ø§Ù‚ÙŠÙ† - ØªØ­Ø¯ÙŠØ«
    document.querySelectorAll('.update-barber-form').forEach(form => {
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            const oldName = form.getAttribute('data-old-name');
            // ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø¨Ø§Ù„ØµÙŠØºØ© Ø§Ù„Ø¯ÙˆÙ„ÙŠØ© ÙˆØ¨Ø¯ÙˆÙ† Ø£ÙŠ Ø±Ù…ÙˆØ² (+, Ù…Ø³Ø§ÙØ§Øª)
            const phone_number = form.phone.value.replace(/[^0-9]/g, ''); 
            const data = {
                old_name: oldName,
                name: form.name.value,
                phone: phone_number,
                image: form.image.value,
                instagram: form.instagram.value || ""
            };
            
            postData('/api/update_barber', data)
            .then(data => {
                alert(data.message);
                if (data.success) { window.location.reload(); }
            })
            .catch(error => { console.error('Error:', error); alert(error.message); });
        });
    });

    // 6. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ù„Ø§Ù‚ÙŠÙ† - Ø­Ø°Ù
    document.querySelectorAll('.delete-barber-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const name = this.getAttribute('data-name');
            if (confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ø­Ù„Ø§Ù‚ ${name}ØŸ`)) {
                deleteData(`/api/delete_barber/${name}`)
                .then(data => {
                    alert(data.message);
                    if (data.success) { window.location.reload(); }
                })
                .catch(error => { console.error('Error:', error); alert(error.message); });
            }
        });
    });

    // 7. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙˆØ± - Ø¥Ø¶Ø§ÙØ©
    document.getElementById('add-image-form').addEventListener('submit', function(e) {
        e.preventDefault();
        const form = e.target;
        const data = {
            filename: form.filename.value,
            barber_name: form.barber_name.value
        };
        
        postData('/api/add_image', data)
        .then(data => {
            alert(data.message);
            if (data.success) { window.location.reload(); }
        })
        .catch(error => { console.error('Error:', error); alert(error.message); });
    });

    // 8. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙˆØ± - Ø­Ø°Ù
    document.querySelectorAll('.delete-image-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const filename = this.getAttribute('data-filename');
            if (confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„ØµÙˆØ±Ø© ${filename}ØŸ`)) {
                deleteData(`/api/delete_image/${filename}`)
                .then(data => {
                    alert(data.message);
                    if (data.success) { window.location.reload(); }
                })
                .catch(error => { console.error('Error:', error); alert(error.message); });
            }
        });
    });

    // 9. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ© - Ø¥Ø¶Ø§ÙØ©
    document.getElementById('add-text-form').addEventListener('submit', function(e) {
        e.preventDefault();
        const form = e.target;
        const data = {
            key: form.key.value,
            value: form.value.value
        };
        
        postData('/api/add_text', data)
        .then(data => {
            alert(data.message);
            if (data.success) { window.location.reload(); }
        })
        .catch(error => { console.error('Error:', error); alert(error.message); });
    });

    // 10. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ© - Ø­Ø°Ù
    document.querySelectorAll('.delete-text-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const key = this.getAttribute('data-key');
            if (confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù†Øµ Ø¨Ø§Ù„Ù…ÙØªØ§Ø­ ${key}ØŸ`)) {
                deleteData(`/api/delete_text/${key}`)
                .then(data => {
                    alert(data.message);
                    if (data.success) { window.location.reload(); }
                })
                .catch(error => { console.error('Error:', error); alert(error.message); });
            }
        });
    });

</script>

</body>
</html>